---
layout: post
title: Comparing PyPy and NodeJS (V8) using parser code generated by Waxeye
published: true
tags:
  - programming
  - pypy
  - v8
---

## [{{page.title}}][1]

As an update to me [previous post][2] I have decided to create another "unscientific" benchmark.

This time I have compared Python and JavaScript parser generated by Waxeye using [PyPy][7] and [NodeJS][6] (V8).

In the first benchmark, all of the queries which were parsed by the parser were the same, but in this one, I have generated **100000** random queries where each one is composed of three to eight tokens with random values.

I was curious how PyPy and V8 JIT will perform in this case where different values are used in each iteration.

You can find the raw results on [github][3], same goes for the [Python][4] and [JavaScript][5] test script source code.

<div style="text-align:center;">
<table style="width: 90%;margin-left:5%; margin-right:5%;">
<tr>
  <th># of iterations</th>
  <th>CPython 2.6.6 (new style classes)</th>
  <th>PyPy 1.5.0-alpha0 (new style classes)</th>
  <th>NodeJS 3.0.2 (V8 3.0.3)</th>
</tr>
<tr>
  <td>100000</td>
  <td>100.382 seconds</td>
  <td>29.587 seconds</td>
  <td><strong>9.661 seconds</strong></td>
</tr>
</table>
</div>
<br />

As you can see from the table above, JavaScript parser (NodeJS / V8) was a lot faster.

It looks like that V8 JIT did a lot better job in this case.

Also keep in mind that I haven't touched and tried to optimize the main Waxeye parser code and the parser code generated by Waxeye.

[1]: {{ page.url }}
[2]: /2011/02/09/writing-Cloudkick-query-qanguage-parser-using-waxeye.html
[3]: https://gist.github.com/824099
[4]: https://gist.github.com/824276
[5]: https://gist.github.com/824278
[6]: http://nodejs.org/
[7]: http://codespeak.net/pypy/dist/pypy/doc/
